# 映画レコメンドWebアプリ

Flask と pandas を用いて作成した、映画レコメンドWebアプリです。  
ユーザーが選択した映画に基づき、おすすめの映画を表示します。

---

## アプリ概要

本アプリは MovieLens データセットを用い、  
ユーザーの評価履歴をもとに映画を推薦する Web アプリケーションです。

- 映画を複数選択可能
- 未選択時と選択時で異なる推薦ロジックを採用
- ローカル環境で動作

---

## 採用したレコメンデーションアルゴリズム

### ① 映画が未選択の場合

**全ユーザーの評価平均が高い映画をおすすめとして表示**します。

- ratings データを movie_id ごとに groupby
- 平均評価（mean）を算出
- 評価が高い上位5件をおすすめとして表示

**理由**  
ユーザーの好みが分からない場合でも、  
全体的に評価が高い映画は満足度が高いと考えられるためです。

---

### ② 映画が選択されている場合

**選択した映画を評価したユーザーが、他に高評価した映画を推薦**します。

処理手順は以下の通りです。

1. 選択された映画IDを取得  
2. その映画を評価したユーザーIDを抽出  
3. 抽出したユーザーが評価した他の映画を取得  
4. 映画ごとの平均評価を算出  
5. 選択済み映画を除外  
6. 平均評価が高い上位5件をおすすめとして表示  

**理由**  
似た映画を評価したユーザーの行動を参考にすることで、  
好みに近い映画を推薦できると考えたためです。

---

## ボタン押下からおすすめ表示までの処理の流れ

1. フロントエンドで映画を複数選択  
2. 「おすすめを見る」ボタンを押下  
3. 選択された映画IDを JavaScript で取得  
4. `/api/recommend` に POST リクエストを送信  
5. Flask 側で推薦ロジックを実行  
6. 推薦結果を JSON 形式で返却  
7. フロントエンドで結果を画面に表示  

---

## 3つの好きな映画情報の扱いについて

選択された複数の映画IDをもとに、  
それらの映画を評価したユーザーを横断的に抽出し、  
共通して評価されている映画の平均評価を算出することで  
推薦精度の向上を図りました。

---

## 使用技術

- Python 3
- Flask
- pandas
- HTML / JavaScript

---

## Webサイトを動作させるために必要な手順

本アプリはローカル環境で Flask サーバを起動して動作します。
そのため、コマンドプロンプト（またはターミナル）の使用が必須です。

### 1. 事前準備

以下のソフトウェアがインストールされている必要があります。

- Python 3.x
- Git（GitHub からダウンロードする場合）

### 2. リポジトリの取得

GitHub から本リポジトリをダウンロードするか、
以下のコマンドを使用して clone します。

git clone https://github.com/nishimurayuuya/eigasyoukai_kadai.git

### 3. backend ディレクトリへ移動

コマンドプロンプト（またはターミナル）を起動し、
本リポジトリ内の backend ディレクトリへ移動します。

cd eigasyoukai_kadai/recommend-app/backend

### 4. 必要なライブラリのインストール

以下のコマンドを実行し、必要なライブラリをインストールします。

pip install flask pandas numpy

requirements.txt が用意されている場合は、代わりに以下を実行します。

pip install -r requirements.txt

### 5. Flask アプリの起動

以下のコマンドを実行して、Flask アプリを起動します。

python app.py

正常に起動すると、コマンドプロンプト上に次のメッセージが表示されます。

Running on http://127.0.0.1:5000

### 6. ブラウザでアクセス

Web ブラウザを開き、以下の URL にアクセスします。

http://127.0.0.1:5000

映画一覧が画面に表示され、
映画を選択して「おすすめを見る」ボタンを押すことで、
おすすめ映画が表示されます。

## ディレクトリ構成

eigasyoukai_kadai/
├─ recommend-app/
│  ├─ backend/
│  │  ├─ app.py
│  │  ├─ requirements.txt
│  │  └─ data/
│  │     ├─ movies_100k.csv
│  │     └─ ratings_100k.csv
│  └─ frontend/
│     └─ index.html
